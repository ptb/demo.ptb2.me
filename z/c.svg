<svg xmlns='http://www.w3.org/2000/svg'> <style> g.button:hover { opacity: 0.75; } .button-label { font-size: 24px; } .draggable { cursor: move; } </style> <script type='application/ecmascript'> <![CDATA[ function buttonClick(evt) { console.log(evt); } var selectedElement = 0; var currentX = 0; var currentY = 0; var currentMatrix = 0; function selectElement(evt) { selectedElement = evt.target; currentX = evt.clientX; currentY = evt.clientY; currentMatrix = selectedElement.getAttributeNS(null, 'transform').slice(7,-1).split(' '); for(var i=0; i<currentMatrix.length; i++) { currentMatrix[i] = parseFloat(currentMatrix[i]); } selectedElement.setAttributeNS(null, 'onmousemove', 'moveElement(evt)'); selectedElement.setAttributeNS(null, 'onmouseout', 'deselectElement(evt)'); selectedElement.setAttributeNS(null, 'onmouseup', 'deselectElement(evt)'); } function moveElement(evt) { var dx = evt.clientX - currentX; var dy = evt.clientY - currentY; currentMatrix[4] += dx; currentMatrix[5] += dy; selectedElement.setAttributeNS(null, 'transform', 'matrix(' + currentMatrix.join(' ') + ')'); currentX = evt.clientX; currentY = evt.clientY; } function deselectElement(evt) { if (selectedElement != 0) { selectedElement.removeAttributeNS(null, 'onmousemove'); selectedElement.removeAttributeNS(null, 'onmouseout'); selectedElement.removeAttributeNS(null, 'onmouseup'); selectedElement = 0; } } ]]> </script> <g class='button' cursor='pointer' onmouseup='buttonClick(evt)'> <rect x='20' y='1' rx='5' ry='5' width='52' height='22' fill='#f00'/> <text class='button-label' x='25' y='16'>Button</text> </g> <rect class='draggable' x='30' y='30' width='80' height='80' fill='blue' transform='matrix(1 0 0 1 0 0)' onmousedown='selectElement(evt)'/> </svg>
